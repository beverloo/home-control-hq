<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, user-scalable=no" />
    <link rel="stylesheet" href="//fonts.googleapis.com/css2?family=Material+Icons&family=Open+Sans" />
    <link rel="stylesheet" href="style/interface.css" />
    <title>Home Control HQ - User Interface</title>
  </head>
  <body>
    <main id="container"></main>
    <dialog id="error-dialog">
      <h1>Fatal error</h1>
      <p id="error-message"></p>
      <ol>
        <li id="error-reload-button">Reload</li>
      </ol>
    </dialog>
    <dialog id="not-connected-dialog" open>
      <h1>No connection</h1>
      <p>
        The controller cannot connect with the server. This should be rectified shortly.
      </p>
    </dialog>
    <dialog id="select-room-dialog">
      <h1>Configuration</h1>
      <ol id="room-list"></ol>
    </dialog>
    <script type="module">
      import { ControlConnection } from './script/control_connection.js';
      import { Controller } from './script/controller.js';

      window.connection = new ControlConnection();
      window.controller = new Controller(window.connection, {
          container: document.getElementById('container'),
          dialogs: {
            error: document.getElementById('error-dialog'),
            notConnected: document.getElementById('not-connected-dialog'),
            selectRoom: document.getElementById('select-room-dialog'),
          }
      });
    </script>
  </body>
</html>
